language: python
python:
    - "2.7"
    
before_install:
    - "wget http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh"
    - "chmod +x miniconda.sh"
    - "./miniconda.sh -b"
    - "export PATH=/home/travis/miniconda/bin:$PATH"
    - "conda update --yes conda"
    - "pip install six>=1.3"
    - "sudo apt-get install -y libgdal1h gdal-bin libgdal-dev"

  # The next couple lines fix a crash with multiprocessing on Travis and are not specific to using Miniconda
    - "sudo rm -rf /dev/shm"
    - "sudo ln -s /run/shm /dev/shm"

install: 
    - "conda install --yes python=$TRAVIS_PYTHON_VERSION numpy scipy"
    - "pip install python-dateutil --force-reinstall --upgrade"
    - "pip install -r requirements.txt"
  # Coverage packages are on my binstar channel

script:
    - "py.test -s -v test_render_1.py"